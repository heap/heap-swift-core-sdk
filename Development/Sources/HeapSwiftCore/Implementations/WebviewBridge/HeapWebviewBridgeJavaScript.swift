// Source: https://github.com/heap/heap-webview-core/commit/d1710bd9998edac74d02b495977ecaf3dc173dc9
let heapWebviewBridgeJavascript = """
(()=>{"use strict";var e,t={175:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createNoopBridge=void 0;var n="\\nFailed to find a suitable bridge for Heap. All operations will be ignored.\\n\\nIf using HeapSwiftCore (Apple platforms), ensure you are calling Heap.attachWebView with the appropriate origins.\\n".trim();t.createNoopBridge=function(){var e=!1;return function(){return e||(e=!0,console.warn(n)),Promise.resolve(null)}}},367:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createNoopBridge=void 0;var i=n(175);Object.defineProperty(t,"createNoopBridge",{enumerable:!0,get:function(){return i.createNoopBridge}}),o(n(576),t)},576:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isHeapSDKInvocation=t.isHeapSDKInvocationResult=void 0,t.isHeapSDKInvocationResult=function(e){return"result"===e.type},t.isHeapSDKInvocation=function(e){return"invocation"===e.type}},843:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.createAutocaptureMethods=void 0;var i=n(502),a=n(270);t.createAutocaptureMethods=function(e,t,n,u){void 0===n&&(n=null);var c=null==n?void 0:n.name,s=(0,i.sanitizeSourceInfo)(n,t,c);return{trackInteraction:function(n,a,l,f,d,v){return r(this,void 0,void 0,(function(){var r,p,h,g,y,b;return o(this,(function(o){switch(o.label){case 0:return null!=f||(f=new Date),r=(0,i.sanitizeInteractionType)(n,t,c),p=(0,i.sanitizeInteractionNodes)(a,t,c),h=(0,i.sanitizeSourceInfo)(d,t,c)||s,g=(0,i.sanitizeTimestamp)(f,t,c),[4,u(v,d,f)];case 1:return y=o.sent(),r&&p?(b={interaction:r,nodes:p},(0,i.isNonEmptyString)(l)&&(b.callbackName=l),g&&(b.javascriptEpochTimestamp=g),h&&(b.sourceLibrary=h),y&&(b.pageviewKey=y),e("trackInteraction",b),[2]):(t.warn("trackInteraction failed because interaction or nodes were invalid.",c),[2])}}))}))},trackPageview:function(n,u,l,f){null!=u||(u=new Date);var d=(0,i.sanitizePageviewProperties)(n,t,c);if(!d)return t.warn("trackPageview failed because properties could not be converted to an object.",c),Promise.resolve(null);var v=(0,i.sanitizeSourceInfo)(l,t,c)||s,p=(0,i.sanitizeTimestamp)(u,t,c),h={properties:d};p&&(h.javascriptEpochTimestamp=p),v&&(h.sourceLibrary=v),h.deadKeys=(0,a.getDeadKeys)();var g=function(t,n,i){return r(this,void 0,void 0,(function(){var r,u,c,s;return o(this,(function(o){switch(o.label){case 0:return[4,e("trackPageview",t)];case 1:return(r=o.sent())?(u=r.pageviewKey,c=r.sessionId,s=r.removedKeys,Array.isArray(s)&&(0,a.removeDeadKeys)(s),"string"!=typeof u||"string"!=typeof c?[2,null]:[2,{pageviewKey:u,sessionId:c,properties:n,userInfo:i,sourceInfo:l}]):[2,null]}}))}))}(h,n,f);return(0,a.setLastPageview)(g),g}}}},221:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.createBridgeInvocationHandler=void 0;var i=n(291);t.createBridgeInvocationHandler=function(e){return function(t){var n,a,u;return function(e,t){return r(this,void 0,void 0,(function(){var n,r,i,a;return o(this,(function(o){switch(o.label){case 0:n=t.callbackId,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e];case 2:return r=o.sent(),[3,4];case 3:return a=o.sent(),i=a instanceof Error?a.message:a?a.toString():"An unknown error occurred.",[3,4];case 4:return n?[2,{type:"result",callbackId:n,data:r,error:i}]:[2,null]}}))}))}((a=t.method,u=null!==(n=t.arguments)&&void 0!==n?n:{},r(void 0,void 0,void 0,(function(){var t,n,r,c,s,l,f,d,v,p,h;return o(this,(function(o){switch(o.label){case 0:switch(a){case"didStartRecording":return[3,1];case"didStopRecording":return[3,2];case"sessionDidStart":return[3,3];case"applicationDidEnterForeground":return[3,4];case"applicationDidEnterBackground":return[3,5];case"reissuePageview":return[3,6]}return[3,8];case 1:return[2,e.onStartRecording((0,i.extractOptions)(u))];case 2:return[2,e.onStopRecording()];case 3:return r=(0,i.extractString)(u,"sessionId"),c=null!==(l=(0,i.extractTimestamp)(u))&&void 0!==l?l:new Date,t=null!==(f=(0,i.extractBoolean)(u,"foregrounded"))&&void 0!==f&&f,null!==r?[2,e.onSessionStart(r,c,t)]:[2,Promise.reject("sessionDidStart was called with invalid parameters.")];case 4:return c=null!==(d=(0,i.extractTimestamp)(u))&&void 0!==d?d:new Date,[2,e.onApplicationForegrounded(c)];case 5:return c=null!==(v=(0,i.extractTimestamp)(u))&&void 0!==v?v:new Date,[2,e.onApplicationBackgrounded(c)];case 6:return n=(0,i.extractString)(u,"pageviewKey"),r=(0,i.extractString)(u,"sessionId"),c=null!==(p=(0,i.extractTimestamp)(u))&&void 0!==p?p:new Date,n&&r?[4,e.reissuePageviewWithKey(n,r,c)]:[2,Promise.reject("reissuePageview was called with invalid parameters.")];case 7:return s=o.sent(),[2,null!==(h=null==s?void 0:s.pageviewKey)&&void 0!==h?h:null];case 8:return[2,Promise.reject("Unknown method ".concat(a,"."))]}}))}))),t)}}},306:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.createCoreMethods=void 0;var i=n(502);t.createCoreMethods=function(e,t,n,a){void 0===n&&(n=null);var u=null==n?void 0:n.name,c=(0,i.sanitizeSourceInfo)(n,t,u);return{startRecording:function(n,r){0!==arguments.length?(0,i.isNonEmptyString)(n)?e("startRecording",{environmentId:n,options:r||{}}):t.warn("startRecording failed because environmentId was not a string.",u):t.warn("startRecording failed because environmentId was omitted.",u)},stopRecording:function(){e("stopRecording",{})},track:function(n,s,l,f,d){return r(this,void 0,void 0,(function(){var r,v,p,h,g;return o(this,(function(o){switch(o.label){case 0:return null!=l||(l=new Date),(0,i.isNonEmptyString)(n)?(r=(0,i.sanitizeProperties)(s,t,u),v=(0,i.sanitizeSourceInfo)(f,t,u)||c,p=(0,i.sanitizeTimestamp)(l,t,u),[4,a(d,f,l)]):(t.warn("track failed because event was not a string.",u),[2]);case 1:return h=o.sent(),g={event:n},r&&(g.properties=r),p&&(g.javascriptEpochTimestamp=p),v&&(g.sourceLibrary=v),h&&(g.pageviewKey=h),e("track",g),[2]}}))}))},identify:function(n){0!==arguments.length?(0,i.isNonEmptyString)(n)?e("identify",{identity:n}):t.warn("identify failed because identity was not a string.",u):t.warn("identify failed because identity was omitted.",u)},resetIdentity:function(){e("resetIdentity",{})},addUserProperties:function(n){var r=(0,i.sanitizeProperties)(n,t,u);r&&(0!==Object.keys(r).length?e("addUserProperties",{properties:r}):t.warn("addUserProperties was called without any valid properties."))},addEventProperties:function(n){var r=(0,i.sanitizeProperties)(n,t,u);r&&(0!==Object.keys(r).length?e("addEventProperties",{properties:r}):t.warn("addEventProperties was called without any valid properties."))},removeEventProperty:function(n){0!==arguments.length?(0,i.isNonEmptyString)(n)?e("removeEventProperty",{name:n}):t.warn("removeEventProperty failed because name was not a string.",u):t.warn("removeEventProperty failed because name was omitted.",u)},clearEventProperties:function(){e("clearEventProperties",{})},setLogLevel:function(e){t.setLogLevel(e)},getSessionId:function(){return e("sessionId",{})},fetchSessionId:function(){return e("fetchSessionId",{})},getUserId:function(){return e("userId",{})},getIdentity:function(){return e("identity",{})}}}},291:function(e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.extractBoolean=t.extractString=t.extractOptions=t.extractTimestamp=void 0,t.extractTimestamp=function(e,t){void 0===t&&(t="javascriptEpochTimestamp");var n=e[t];return"number"==typeof n?new Date(n):null},t.extractOptions=function(e,t){void 0===t&&(t="options");var r=e[t];return"object"==typeof r?n({},r):{}},t.extractString=function(e,t){var n=e[t];return"string"==typeof n?n:null},t.extractBoolean=function(e,t){var n=e[t];return"boolean"==typeof n?n:null}},154:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createHeap=t.createBridgeInvocationHandler=t.SourceManager=void 0;var o=n(843),i=n(306),a=n(381),u=n(270),c=n(381);Object.defineProperty(t,"SourceManager",{enumerable:!0,get:function(){return c.SourceManager}});var s=n(221);Object.defineProperty(t,"createBridgeInvocationHandler",{enumerable:!0,get:function(){return s.createBridgeInvocationHandler}}),t.createHeap=function(e,t,n,c){void 0===n&&(n=null),void 0===c&&(c=null);var s=(0,u.createPageviewKeyResolver)(c,t,null==n?void 0:n.name);return r(r(r({},(0,o.createAutocaptureMethods)(e,t,n,s)),(0,i.createCoreMethods)(e,t,n,s)),(0,a.createSourceManagementMethods)(e,c))}},270:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},u=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.createPageviewKeyResolver=t.waitForRecentResolutionsToTimeout=t.clearRecentPageviewResolutions=t.setRecentPageviewResolutionTimeout=t.recordRecentPageviewResolution=t.getRecentResolutionForKey=t.getLastPageview=t.clearLastPageview=t.setLastPageview=t.getDeadKeys=t.removeDeadKeys=t.addDeadKey=void 0;var c=n(502),s=[],l=n.g.FinalizationRegistry?new FinalizationRegistry(f):null;function f(e){s.push(e)}t.addDeadKey=f,t.removeDeadKeys=function(e){if(Array.isArray(e)){var t=new Set(e);s=s.filter((function(e){return!t.has(e)}))}},t.getDeadKeys=function(){return a([],i(s),!1)};var d=Promise.resolve(null);t.setLastPageview=function(e){d=r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e];case 1:return[2,t.sent()];case 2:return t.sent(),[2,null];case 3:return[2]}}))})),function(e){r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e];case 1:return(t=n.sent())&&l&&l.register(t,null==t?void 0:t.pageviewKey),[3,3];case 2:return n.sent(),[3,3];case 3:return[2]}}))}))}(e)},t.clearLastPageview=function(){d=Promise.resolve(null)},t.getLastPageview=function(){return d};var v=[],p=5e3;t.getRecentResolutionForKey=function(e){var t;return(null===(t=a([],i(v),!1).reverse().find((function(t){return i(t,1)[0].pageviewKey===e})))||void 0===t?void 0:t[0])||null},t.recordRecentPageviewResolution=function(e){if(!(p<=0)){var t,r=new Promise((function(e){t=e})),o=function(){return null==t?void 0:t()},a=n.g.setTimeout((function(){var e=v.findIndex((function(e){return i(e,2)[1]===a}));e>=0&&v.splice(e,1),o()}),p);v.push([e,a,r,o])}},t.setRecentPageviewResolutionTimeout=function(e){p=e},t.clearRecentPageviewResolutions=function(){var e,t;try{for(var r=u(v),o=r.next();!o.done;o=r.next()){var a=i(o.value,4),c=a[1],s=a[3];n.g.clearTimeout(c),s()}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}v.length=0},t.waitForRecentResolutionsToTimeout=function(){return Promise.all(v.map((function(e){return i(e,3)[2]})))};var h=function(e){return(0,c.isNonEmptyString)(null==e?void 0:e.pageviewKey)};t.createPageviewKeyResolver=function(e,n,i){return function(a,u,c){return r(void 0,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:if("none"===a)return[2,"none"];if(!function(e){return!!e&&"function"==typeof e.then}(a))return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,a];case 2:return a=o.sent(),[3,4];case 3:return r=o.sent(),a=null,n.debug("Pageview threw an error and will be ignored.",i),n.trace("Pageview error: ".concat(r),i),[3,4];case 4:return a&&!h(a)&&(a=null,n.debug("Pageview did not have a valid key and will be ignored.",i)),(null==e?void 0:e.pageviewNeedsReissue(a))?[4,e.reissuePageview(a,null,c)]:[3,6];case 5:a=o.sent(),o.label=6;case 6:return h(a)?[3,8]:[4,null==e?void 0:e.activePageview(null==u?void 0:u.name,c)];case 7:a=o.sent(),o.label=8;case 8:return h(a)?[3,10]:[4,d];case 9:a=o.sent(),o.label=10;case 10:return h(a)?((0,t.recordRecentPageviewResolution)(a),[2,a.pageviewKey]):[2,null]}}))}))}}},502:function(e,t,n){var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeInteractionNodes=t.sanitizeInteractionType=t.sanitizePageviewProperties=t.sanitizeTimestamp=t.sanitizeSourceInfo=t.isNonEmptyString=t.sanitizeProperties=void 0;var o=n(748);function i(e,t,n){var i,a,u;if(!e)return null;if("object"!=typeof e)return t.debug("Ignoring properties because they are not an object",n),null;var c={};try{for(var s=r(Object.keys(e)),l=s.next();!l.done;l=s.next()){var f=l.value,d=e[f];(0,o.isPropertyValue)(d)?c[f]=d.toString():t.debug("Ignoring property ".concat(f," because the value ").concat((null===(u=null==d?void 0:d.toString)||void 0===u?void 0:u.call(d))||d," is not a valid property type"),n)}}catch(e){i={error:e}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return c}function a(e){return e&&"string"==typeof e}t.sanitizeProperties=i,t.isNonEmptyString=a,t.sanitizeSourceInfo=function(e,t,n){if(!e)return null;if(!a(e.name))return t.debug("Source will be ignored because name was omitted.",n),null;if(!a(e.version))return t.debug("Source will be ignored because version was omitted.",n),null;if(!a(e.platform))return t.debug("Source will be ignored because platform was omitted.",n),null;var r={name:e.name,version:e.version,platform:e.platform},o=i(e.properties,t,n);return o&&(r.properties=o),r},t.sanitizeTimestamp=function(e,t,n){return e?"function"!=typeof e.getTime?(t.debug("Timestamp will be ignored because it is not a date.",n),null):e.getTime():null},t.sanitizePageviewProperties=function(e,t,n){if(!e)return null;if("object"!=typeof e)return t.debug("Ignoring pageview properties because they are not an object",n),null;var r={},o=e.componentOrClassName,u=e.title,c=e.url,s=i(e.sourceProperties,t,n);return a(o)&&(r.componentOrClassName=o),a(u)&&(r.title=u),a(c)&&(r.url=c),s&&(r.sourceProperties=s),r},t.sanitizeInteractionType=function(e,t,n){if(!e)return t.debug("Interaction type was missing.",n),null;if(a(e))return e;var r=e.builtin;if("number"==typeof e.builtin)return{builtin:r};var o=e.custom;return a(o)?{custom:o}:(t.debug("Interaction type was of an unknown format.",n),null)},t.sanitizeInteractionNodes=function(e,t,n){if(!e||!Array.isArray(e)||0===e.length)return null;var r=e.flatMap((function(e){var r=function(e,t,n){if(!e)return null;var r=e.nodeName;if(!a(r))return t.debug("Interaction node omitted required field nodeName and will be ignored.",n),null;var o={nodeName:r};["nodeText","nodeHtmlClass","nodeId","href","accessibilityLabel","referencingPropertyName"].forEach((function(t){var n=e[t];a(n)&&(o[t]=n)}));var u=i(e.attributes,t,n);return u&&(o.attributes=u),o}(e,t,n);return r?[r]:[]}));return 0===r.length?null:r}},381:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.createSourceManagementMethods=t.SourceManager=void 0;var a=n(270),u=function(){function e(e,t){void 0===t&&(t=void 0),this.sources={},this.defaultSource=null,this.sessionId=null,this.options=null,this.foregrounded=!1,this.logger=e,this.logSource=t}return e.prototype.addSource=function(e,t,n){var r,o,i=this.sources[e.name];i!==e&&(this.sources[e.name]=e,t?(o=this.defaultSource,this.defaultSource=e):(null===(r=this.defaultSource)||void 0===r?void 0:r.name)===e.name?(o=this.defaultSource,this.defaultSource=null):o=null,o&&(t?this.logger.warn("Replaced default source ".concat(o.name," with ").concat(e.name,"."),this.logSource):this.logger.warn("Removed default source ".concat(o.name," when setting a new non-default source of the same name."),this.logSource)),this.options&&(i&&this.callOnStopRecording(i),this.callOnStartRecording(e,this.options),this.sessionId&&this.callOnSessionStart(e,this.sessionId,n,this.foregrounded),this.foregrounded&&this.callOnApplicationForegrounded(e,n)))},e.prototype.removeSource=function(e){var t,n=this.sources[e];delete this.sources[e],(null===(t=this.defaultSource)||void 0===t?void 0:t.name)===e&&(this.defaultSource=null),this.options&&n&&this.callOnStopRecording(n)},e.prototype.removeAll=function(){var e,t;try{for(var n=i(Object.keys(this.sources)),r=n.next();!r.done;r=n.next()){var o=r.value;this.removeSource(o)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.onStartRecording=function(e){return r(this,void 0,void 0,(function(){var t,n,r,a,u,c;return o(this,(function(o){switch(o.label){case 0:this.options=e,this.sessionId=null,o.label=1;case 1:o.trys.push([1,6,7,8]),t=i(Object.values(this.sources)),n=t.next(),o.label=2;case 2:return n.done?[3,5]:(r=n.value,[4,this.callOnStartRecording(r,e)]);case 3:o.sent(),o.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return a=o.sent(),u={error:a},[3,8];case 7:try{n&&!n.done&&(c=t.return)&&c.call(t)}finally{if(u)throw u.error}return[7];case 8:return[2]}}))}))},e.prototype.callOnStartRecording=function(e,t){return this.swallowErrors((function(){var n;return null===(n=e.onStartRecording)||void 0===n?void 0:n.call(e,t)}),e.name,"onStartRecording",(function(){return Promise.resolve()}))},e.prototype.onStopRecording=function(){return r(this,void 0,void 0,(function(){var e,t,n,r,a,u;return o(this,(function(o){switch(o.label){case 0:this.options=null,this.sessionId=null,o.label=1;case 1:o.trys.push([1,6,7,8]),e=i(Object.values(this.sources)),t=e.next(),o.label=2;case 2:return t.done?[3,5]:(n=t.value,[4,this.callOnStopRecording(n)]);case 3:o.sent(),o.label=4;case 4:return t=e.next(),[3,2];case 5:return[3,8];case 6:return r=o.sent(),a={error:r},[3,8];case 7:try{t&&!t.done&&(u=e.return)&&u.call(e)}finally{if(a)throw a.error}return[7];case 8:return[2]}}))}))},e.prototype.callOnStopRecording=function(e){return this.swallowErrors((function(){var t;return null===(t=e.onStopRecording)||void 0===t?void 0:t.call(e)}),e.name,"onStopRecording",(function(){return Promise.resolve()}))},e.prototype.onSessionStart=function(e,t,n){return r(this,void 0,void 0,(function(){var r,a,u,c,s,l;return o(this,(function(o){switch(o.label){case 0:this.sessionId=e,this.foregrounded=n,o.label=1;case 1:o.trys.push([1,6,7,8]),r=i(Object.values(this.sources)),a=r.next(),o.label=2;case 2:return a.done?[3,5]:(u=a.value,[4,this.callOnSessionStart(u,e,t,n)]);case 3:o.sent(),o.label=4;case 4:return a=r.next(),[3,2];case 5:return[3,8];case 6:return c=o.sent(),s={error:c},[3,8];case 7:try{a&&!a.done&&(l=r.return)&&l.call(r)}finally{if(s)throw s.error}return[7];case 8:return[2]}}))}))},e.prototype.callOnSessionStart=function(e,t,n,r){return this.swallowErrors((function(){var o;return null===(o=e.onSessionStart)||void 0===o?void 0:o.call(e,t,n,r)}),e.name,"onSessionStart",(function(){return Promise.resolve()}))},e.prototype.onApplicationForegrounded=function(e){return r(this,void 0,void 0,(function(){var t,n,r,a,u,c;return o(this,(function(o){switch(o.label){case 0:this.foregrounded=!0,o.label=1;case 1:o.trys.push([1,6,7,8]),t=i(Object.values(this.sources)),n=t.next(),o.label=2;case 2:return n.done?[3,5]:(r=n.value,[4,this.callOnApplicationForegrounded(r,e)]);case 3:o.sent(),o.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return a=o.sent(),u={error:a},[3,8];case 7:try{n&&!n.done&&(c=t.return)&&c.call(t)}finally{if(u)throw u.error}return[7];case 8:return[2]}}))}))},e.prototype.callOnApplicationForegrounded=function(e,t){return this.swallowErrors((function(){var n;return null===(n=e.onApplicationForegrounded)||void 0===n?void 0:n.call(e,t)}),e.name,"onApplicationForegrounded",(function(){return Promise.resolve()}))},e.prototype.onApplicationBackgrounded=function(e){return r(this,void 0,void 0,(function(){var t,n,r,a,u,c;return o(this,(function(o){switch(o.label){case 0:this.foregrounded=!1,o.label=1;case 1:o.trys.push([1,6,7,8]),t=i(Object.values(this.sources)),n=t.next(),o.label=2;case 2:return n.done?[3,5]:(r=n.value,[4,this.callOnApplicationBackgrounded(r,e)]);case 3:o.sent(),o.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return a=o.sent(),u={error:a},[3,8];case 7:try{n&&!n.done&&(c=t.return)&&c.call(t)}finally{if(u)throw u.error}return[7];case 8:return[2]}}))}))},e.prototype.callOnApplicationBackgrounded=function(e,t){return this.swallowErrors((function(){var n;return null===(n=e.onApplicationBackgrounded)||void 0===n?void 0:n.call(e,t)}),e.name,"onApplicationBackgrounded",(function(){return Promise.resolve()}))},e.prototype.activePageview=function(e,t){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return e&&this.sources[e]?[4,this.callActivePageview(this.sources[e],t)]:[3,2];case 1:if(n=r.sent())return[2,n];r.label=2;case 2:return this.defaultSource?[4,this.callActivePageview(this.defaultSource,t)]:[3,4];case 3:if(n=r.sent())return[2,n];r.label=4;case 4:return[2,null]}}))}))},e.prototype.callActivePageview=function(e,t){var n=this;return this.swallowErrors((function(){var r;return null===(r=e.activePageview)||void 0===r?void 0:r.call(e,n.sessionId,t)}),e.name,"activePageview",(function(){return Promise.resolve(null)}))},e.prototype.pageviewNeedsReissue=function(e){return!(!e||!this.sessionId||this.sessionId===e.sessionId)},e.prototype.reissuePageview=function(e,t,n){var i,a;return r(this,void 0,void 0,(function(){var r,u;return o(this,(function(o){switch(o.label){case 0:return r=null===(i=e.sourceInfo)||void 0===i?void 0:i.name,null!=t||(t=null!==(a=this.sessionId)&&void 0!==a?a:null),r&&(u=this.sources[r])?[4,this.callReissuePageview(u,e,t,n)]:[2,null];case 1:return[2,o.sent()]}}))}))},e.prototype.reissuePageviewWithKey=function(e,t,n){return r(this,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:return(r=(0,a.getRecentResolutionForKey)(e))?[4,this.reissuePageview(r,t,n)]:[3,2];case 1:return[2,o.sent()];case 2:return[2,null]}}))}))},e.prototype.callReissuePageview=function(e,t,n,r){return this.swallowErrors((function(){var o;return null===(o=e.reissuePageview)||void 0===o?void 0:o.call(e,t,n,r)}),e.name,"reissuePageview",(function(){return Promise.resolve(null)}))},e.prototype.swallowErrors=function(e,t,n,i){return r(this,void 0,void 0,(function(){var r,a;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,e()];case 1:return r=o.sent(),this.logger.trace("Source [".concat(t,"] has completed all work related to ").concat(n,"."),this.logSource),[2,r||i()];case 2:return a=o.sent(),this.logger.error("Source [".concat(t,"] threw an error while handling ").concat(n,": ").concat(a),this.logSource),[2,i()];case 3:return[2]}}))}))},e}();t.SourceManager=u,t.createSourceManagementMethods=function(e,t){return{addSource:function(n,r,o){e("attachRuntimeBridge",{}),null==t||t.addSource(n,null!=r&&r,null!=o?o:new Date)},removeSource:function(e){null==t||t.removeSource(e)}}}},748:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isPropertyValue=void 0,t.isPropertyValue=function(e){return["number","boolean","string","bigint"].includes(typeof e)}},482:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isHeapSDKInvocationResult=t.isHeapSDKInvocation=t.createNoopBridge=t.LogLevel=t.createLogger=t.SourceManager=t.createBridgeInvocationHandler=t.createHeap=void 0;var r=n(154);Object.defineProperty(t,"createHeap",{enumerable:!0,get:function(){return r.createHeap}}),Object.defineProperty(t,"createBridgeInvocationHandler",{enumerable:!0,get:function(){return r.createBridgeInvocationHandler}}),Object.defineProperty(t,"SourceManager",{enumerable:!0,get:function(){return r.SourceManager}});var o=n(123);Object.defineProperty(t,"createLogger",{enumerable:!0,get:function(){return o.createLogger}}),Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return o.LogLevel}});var i=n(367);Object.defineProperty(t,"createNoopBridge",{enumerable:!0,get:function(){return i.createNoopBridge}}),Object.defineProperty(t,"isHeapSDKInvocation",{enumerable:!0,get:function(){return i.isHeapSDKInvocation}}),Object.defineProperty(t,"isHeapSDKInvocationResult",{enumerable:!0,get:function(){return i.isHeapSDKInvocationResult}})},123:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createLogger=t.LogLevel=void 0;var r,o=n(502);function i(e,t,n,r){if((0,o.isNonEmptyString)(t)){var i={logLevel:n,message:t};(0,o.isNonEmptyString)(r)&&(i.source=r),e("heapLogger_log",i)}}!function(e){e.None="none",e.Error="error",e.Warn="warn",e.Info="info",e.Debug="debug",e.Trace="trace"}(r=t.LogLevel||(t.LogLevel={})),t.createLogger=function(e){return{error:function(t,n){i(e,t,r.Error,n)},warn:function(t,n){i(e,t,r.Warn,n)},info:function(t,n){i(e,t,r.Info,n)},debug:function(t,n){i(e,t,r.Debug,n)},trace:function(t,n){i(e,t,r.Trace,n)},setLogLevel:function(t){e("heapLogger_setLogLevel",{logLevel:t})},getLogLevel:function(){return e("heapLogger_logLevel",{})}}}},784:function(e,t,n){var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.defineHeapGlobals=void 0;var o=n(144);t.defineHeapGlobals=function(e){var t=r((0,o.createWebviewHeap)(e),2),n=t[0],i=t[1];window.HeapLogger=i,window.Heap=n}},695:function(e,t,n){var r,o,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getSwiftInvocationHandler=void 0;var u=n(482),c=n(569),s=n(778),l=null===(o=null===(r=window.webkit)||void 0===r?void 0:r.messageHandlers)||void 0===o?void 0:o.HeapSwiftBridge,f=function(e,t){if(!l)return Promise.resolve();var n=(0,c.createCallback)(),r=n.promise,o=n.callbackId;return l.postMessage({type:"invocation",method:e,arguments:t,callbackId:o}),r};l&&(window.__heapNativeMessage=function(e){return function(e){i(void 0,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return(0,u.isHeapSDKInvocationResult)(e)?((0,c.dispatchCallback)(e),[3,3]):[3,1];case 1:return(0,u.isHeapSDKInvocation)(e)?[4,(0,s.performBridgeInvocation)(e)]:[3,3];case 2:(t=n.sent())&&l.postMessage(t),n.label=3;case 3:return[2]}}))}))}(e),!0}),t.getSwiftInvocationHandler=function(){return l?f:null}},778:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.performBridgeInvocation=t.setBridgeInvocationHandler=void 0;var n=null;t.setBridgeInvocationHandler=function(e){n=e},t.performBridgeInvocation=function(e){return n?n(e):Promise.resolve(null)}},569:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dispatchCallback=t.createCallback=void 0;var n=0,r={};t.createCallback=function(){var e="cb:".concat(n++),t=new Promise((function(t,n){r[e]=function(e){e.error?n(e.error):t(e.data)}}));return{callbackId:e,promise:t}},t.dispatchCallback=function(e){var t;null===(t=r[e.callbackId])||void 0===t||t.call(r,e),delete r[e.callbackId]}},144:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createWebviewHeap=void 0;var r=n(482),o=n(778);t.createWebviewHeap=function(e){var t=e||(0,r.createNoopBridge)(),n=(0,r.createLogger)(t),i=new r.SourceManager(n);return(0,o.setBridgeInvocationHandler)((0,r.createBridgeInvocationHandler)(i)),[(0,r.createHeap)(t,n,null,i),n]}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}};return t[e].call(i.exports,i,i.exports,r),i.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e=r(695),(0,r(784).defineHeapGlobals)((0,e.getSwiftInvocationHandler)())})();
"""
